{"ast":null,"code":"import _slicedToArray from\"D:/Curs-Scoala informala de IT/week1-15_all-homeworks/week15_homework_Rick and Morty API_React_useContext+customHook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";import Episode from\"../Episodes/Episode\";import LoadingSpinner from\"../UI/LoadingSpinner\";import Pagination from\"../Pagination\";import MobileEpisodesList from\"./MobileEpisodesList\";import useHttp from\"../../hooks/use-http\";import config from\"../../config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EpisodesList=function EpisodesList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),episodes=_useState2[0],setEpisodes=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),totalPages=_useState6[0],setTotalPages=_useState6[1];var setEpisodesData=useCallback(function(dataArr){setEpisodes(dataArr[\"results\"]);setTotalPages(dataArr[\"info\"][\"pages\"]);},[]);var _useHttp=useHttp(setEpisodesData),isLoading=_useHttp.isLoading,getEpisodes=_useHttp.sendRequest;var switchPage=function switchPage(pageNo){setCurrentPage(pageNo);};useEffect(function(){getEpisodes({link:config.api.episodesAPI,errorMessage:\"Could not get Episodes!\",urlParams:[{property:\"page\",value:currentPage,required:true}]});},[currentPage,getEpisodes]);return/*#__PURE__*/_jsxs(_Fragment,{children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{}),!isLoading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"ul\",{className:\"episodes-list\",children:episodes.map(function(episode){return/*#__PURE__*/_jsx(Episode,{episode:episode.episode,name:episode.name,air_date:episode.air_date,charactersNo:episode.characters.length,setActiveEpisodeHandler:props.setActiveEpisodeHandler,active:props.activeEpisode===episode.episode},episode.id);})}),/*#__PURE__*/_jsx(Pagination,{totalPages:totalPages,currentPage:currentPage,switchPage:switchPage})]}),/*#__PURE__*/_jsx(MobileEpisodesList,{})]});};export default EpisodesList;","map":{"version":3,"names":["useState","useEffect","useCallback","Episode","LoadingSpinner","Pagination","MobileEpisodesList","useHttp","config","EpisodesList","props","episodes","setEpisodes","currentPage","setCurrentPage","totalPages","setTotalPages","setEpisodesData","dataArr","isLoading","getEpisodes","sendRequest","switchPage","pageNo","link","api","episodesAPI","errorMessage","urlParams","property","value","required","map","episode","name","air_date","characters","length","setActiveEpisodeHandler","activeEpisode","id"],"sources":["D:/Curs-Scoala informala de IT/week1-15_all-homeworks/week15_homework_Rick and Morty API_React_useContext+customHook/src/components/Episodes/EpisodesList.js"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\n\r\nimport Episode from \"../Episodes/Episode\";\r\nimport LoadingSpinner from \"../UI/LoadingSpinner\";\r\nimport Pagination from \"../Pagination\";\r\nimport MobileEpisodesList from \"./MobileEpisodesList\";\r\n\r\nimport useHttp from \"../../hooks/use-http\";\r\nimport config from \"../../config\";\r\n\r\nconst EpisodesList = (props) => {\r\n  const [episodes, setEpisodes] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState();\r\n\r\n  const setEpisodesData = useCallback((dataArr) => {\r\n    setEpisodes(dataArr[\"results\"]);\r\n    setTotalPages(dataArr[\"info\"][\"pages\"]);\r\n  }, []);\r\n\r\n  const { isLoading, sendRequest: getEpisodes } = useHttp(setEpisodesData);\r\n\r\n  const switchPage = (pageNo) => {\r\n    setCurrentPage(pageNo);\r\n  };\r\n\r\n  useEffect(() => {\r\n    getEpisodes({\r\n      link: config.api.episodesAPI,\r\n      errorMessage: \"Could not get Episodes!\",\r\n      urlParams: [{ property: \"page\", value: currentPage, required: true }],\r\n    });\r\n  }, [currentPage, getEpisodes]);\r\n\r\n  return (\r\n    <>\r\n      {isLoading && <LoadingSpinner />}\r\n      {!isLoading && (\r\n        <>\r\n          <ul className=\"episodes-list\">\r\n            {episodes.map((episode) => (\r\n              <Episode\r\n                key={episode.id}\r\n                episode={episode.episode}\r\n                name={episode.name}\r\n                air_date={episode.air_date}\r\n                charactersNo={episode.characters.length}\r\n                setActiveEpisodeHandler={props.setActiveEpisodeHandler}\r\n                active={props.activeEpisode === episode.episode}\r\n              />\r\n            ))}\r\n          </ul>\r\n          <Pagination\r\n            totalPages={totalPages}\r\n            currentPage={currentPage}\r\n            switchPage={switchPage}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* ------------- for Mobile  ------------ */}\r\n      <MobileEpisodesList />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EpisodesList;\r\n"],"mappings":"0MAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,WAA9B,KAAiD,OAAjD,CAEA,MAAOC,QAAP,KAAoB,qBAApB,CACA,MAAOC,eAAP,KAA2B,sBAA3B,CACA,MAAOC,WAAP,KAAuB,eAAvB,CACA,MAAOC,mBAAP,KAA+B,sBAA/B,CAEA,MAAOC,QAAP,KAAoB,sBAApB,CACA,MAAOC,OAAP,KAAmB,cAAnB,C,6IAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAW,CAC9B,cAAgCV,QAAQ,CAAC,EAAD,CAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAAsCZ,QAAQ,CAAC,CAAD,CAA9C,yCAAOa,WAAP,eAAoBC,cAApB,eACA,eAAoCd,QAAQ,EAA5C,yCAAOe,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,gBAAe,CAAGf,WAAW,CAAC,SAACgB,OAAD,CAAa,CAC/CN,WAAW,CAACM,OAAO,CAAC,SAAD,CAAR,CAAX,CACAF,aAAa,CAACE,OAAO,CAAC,MAAD,CAAP,CAAgB,OAAhB,CAAD,CAAb,CACD,CAHkC,CAGhC,EAHgC,CAAnC,CAKA,aAAgDX,OAAO,CAACU,eAAD,CAAvD,CAAQE,SAAR,UAAQA,SAAR,CAAgCC,WAAhC,UAAmBC,WAAnB,CAEA,GAAMC,WAAU,CAAG,QAAbA,WAAa,CAACC,MAAD,CAAY,CAC7BT,cAAc,CAACS,MAAD,CAAd,CACD,CAFD,CAIAtB,SAAS,CAAC,UAAM,CACdmB,WAAW,CAAC,CACVI,IAAI,CAAEhB,MAAM,CAACiB,GAAP,CAAWC,WADP,CAEVC,YAAY,CAAE,yBAFJ,CAGVC,SAAS,CAAE,CAAC,CAAEC,QAAQ,CAAE,MAAZ,CAAoBC,KAAK,CAAEjB,WAA3B,CAAwCkB,QAAQ,CAAE,IAAlD,CAAD,CAHD,CAAD,CAAX,CAKD,CANQ,CAMN,CAAClB,WAAD,CAAcO,WAAd,CANM,CAAT,CAQA,mBACE,2BACGD,SAAS,eAAI,KAAC,cAAD,IADhB,CAEG,CAACA,SAAD,eACC,wCACE,WAAI,SAAS,CAAC,eAAd,UACGR,QAAQ,CAACqB,GAAT,CAAa,SAACC,OAAD,qBACZ,KAAC,OAAD,EAEE,OAAO,CAAEA,OAAO,CAACA,OAFnB,CAGE,IAAI,CAAEA,OAAO,CAACC,IAHhB,CAIE,QAAQ,CAAED,OAAO,CAACE,QAJpB,CAKE,YAAY,CAAEF,OAAO,CAACG,UAAR,CAAmBC,MALnC,CAME,uBAAuB,CAAE3B,KAAK,CAAC4B,uBANjC,CAOE,MAAM,CAAE5B,KAAK,CAAC6B,aAAN,GAAwBN,OAAO,CAACA,OAP1C,EACOA,OAAO,CAACO,EADf,CADY,EAAb,CADH,EADF,cAcE,KAAC,UAAD,EACE,UAAU,CAAEzB,UADd,CAEE,WAAW,CAAEF,WAFf,CAGE,UAAU,CAAES,UAHd,EAdF,GAHJ,cA0BE,KAAC,kBAAD,IA1BF,GADF,CA8BD,CAtDD,CAwDA,cAAeb,aAAf"},"metadata":{},"sourceType":"module"}