{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback } from \"react\";\nconst link = \"https://rickandmortyapi.com/api/\"; // requestConfig = {\n//   link,\n//   errorMessage,\n//   urlParams: [{property: \"episode\", value: \"\", required: true/false}]\n// };\n\nconst useHttp = applyData => {\n  _s();\n\n  const prepareLink = newLink => {\n    return newLink.replace(link, \"\");\n  };\n\n  const processURLParams = urlParams => {\n    for (let param in urlParams) {\n      if (param.required) {\n        if (!param) {\n          return Promise.reject(new Error(\"Please select an Episode to view!\"));\n        }\n      }\n    }\n  };\n\n  const sendRequest = useCallback(requestConfig => {\n    fetch(link + prepareLink(requestConfig.link), {\n      method: \"GET\"\n    }).then(response => {\n      if (!response.ok) {\n        return Promise.reject(new Error(requestConfig.errorMessage));\n      }\n\n      return response.json();\n    }).then(data => {\n      applyData(data);\n    }).catch(error => {\n      console.log(error.message);\n    });\n  }, []);\n  return {\n    sendRequest\n  };\n};\n\n_s(useHttp, \"U9lYIH66Jw0Akt/IAVm2HjmQRdM=\");\n\nexport default useHttp;","map":{"version":3,"names":["useCallback","link","useHttp","applyData","prepareLink","newLink","replace","processURLParams","urlParams","param","required","Promise","reject","Error","sendRequest","requestConfig","fetch","method","then","response","ok","errorMessage","json","data","catch","error","console","log","message"],"sources":["D:/Curs-Scoala informala de IT/week14_homework_Rick and Morty API-React - useContext/src/hooks/use-http.js"],"sourcesContent":["import { useCallback } from \"react\";\r\n\r\nconst link = \"https://rickandmortyapi.com/api/\";\r\n\r\n// requestConfig = {\r\n//   link,\r\n//   errorMessage,\r\n//   urlParams: [{property: \"episode\", value: \"\", required: true/false}]\r\n// };\r\n\r\nconst useHttp = (applyData) => {\r\n  const prepareLink = (newLink) => {\r\n    return newLink.replace(link, \"\");\r\n  };\r\n\r\n  const processURLParams = (urlParams) => {\r\n    for(let param in urlParams) {\r\n      if(param.required){\r\n         if (!param) {\r\n           return Promise.reject(\r\n             new Error(\"Please select an Episode to view!\")\r\n           );\r\n         }\r\n      }\r\n    }\r\n     };\r\n\r\n  const sendRequest = useCallback((requestConfig) => {\r\n    fetch(link + prepareLink(requestConfig.link), {\r\n      method: \"GET\",\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          return Promise.reject(new Error(requestConfig.errorMessage));\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        applyData(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error.message);\r\n      });\r\n  }, []);\r\n\r\n  return {\r\n    sendRequest,\r\n  };\r\n};\r\n\r\nexport default useHttp;\r\n"],"mappings":";;AAAA,SAASA,WAAT,QAA4B,OAA5B;AAEA,MAAMC,IAAI,GAAG,kCAAb,C,CAEA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,OAAO,GAAIC,SAAD,IAAe;EAAA;;EAC7B,MAAMC,WAAW,GAAIC,OAAD,IAAa;IAC/B,OAAOA,OAAO,CAACC,OAAR,CAAgBL,IAAhB,EAAsB,EAAtB,CAAP;EACD,CAFD;;EAIA,MAAMM,gBAAgB,GAAIC,SAAD,IAAe;IACtC,KAAI,IAAIC,KAAR,IAAiBD,SAAjB,EAA4B;MAC1B,IAAGC,KAAK,CAACC,QAAT,EAAkB;QACf,IAAI,CAACD,KAAL,EAAY;UACV,OAAOE,OAAO,CAACC,MAAR,CACL,IAAIC,KAAJ,CAAU,mCAAV,CADK,CAAP;QAGD;MACH;IACF;EACC,CAVJ;;EAYA,MAAMC,WAAW,GAAGd,WAAW,CAAEe,aAAD,IAAmB;IACjDC,KAAK,CAACf,IAAI,GAAGG,WAAW,CAACW,aAAa,CAACd,IAAf,CAAnB,EAAyC;MAC5CgB,MAAM,EAAE;IADoC,CAAzC,CAAL,CAGGC,IAHH,CAGSC,QAAD,IAAc;MAClB,IAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;QAChB,OAAOT,OAAO,CAACC,MAAR,CAAe,IAAIC,KAAJ,CAAUE,aAAa,CAACM,YAAxB,CAAf,CAAP;MACD;;MACD,OAAOF,QAAQ,CAACG,IAAT,EAAP;IACD,CARH,EASGJ,IATH,CASSK,IAAD,IAAU;MACdpB,SAAS,CAACoB,IAAD,CAAT;IACD,CAXH,EAYGC,KAZH,CAYUC,KAAD,IAAW;MAChBC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;IACD,CAdH;EAeD,CAhB8B,EAgB5B,EAhB4B,CAA/B;EAkBA,OAAO;IACLd;EADK,CAAP;AAGD,CAtCD;;GAAMZ,O;;AAwCN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}